<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<th:block th:fragment="setFragment(content)">
    <head>
        <meta charset="UTF-8">
        <title>Booktopia Test</title>
        <link rel="stylesheet" th:href="@{/dist/css/header.css}">
        <link rel="stylesheet" th:href="@{/dist/css/reset.css}">
        <link rel="stylesheet" th:href="@{/dist/css/footer.css}">
        <link rel="stylesheet" th:href="@{/dist/css/mainPage.css}">

    </head>
    <body>
    <nav class="contain-header">
        <div class="wrap-header">
            <div class="contain-body">
                <a class="logo" th:href="@{/}">로고</a>
                <div class="cate">
                    <ul>
                        <li><a class="cate cate1" href="#">북토피아 소개</a></li>
                        <li><a class="cate cate2" th:href="@{/subscribe/info}">구독상품</a></li>
                        <li><a class="cate cate3" th:href="@{/community/communityMain}">커뮤니티</a></li>
                        <li><a class="cate cate4" th:href="@{/booktopiaTest/test}">취향검사</a></li>
                        <li class="right" sec:authorize="isAnonymous()"><a class="register"
                                                                           th:href="@{/user/join}">회원가입</a></li>
                        <li sec:authorize="isAnonymous()"><a class="login" th:href="@{/user/login}">로그인</a></li>
                        <th:block sec:authorize="isAuthenticated()">
                            <th:block th:with="auth=${#authentication.getPrincipal()}">
                                <li>
                                    <a th:href="@{|/oauth2/authorization/${auth.getUserInfo().getUserType()}?mode=unlink|}"
                                       id="out">링크 끊기[[${auth.getUserInfo().getId()}]]</a></li>
                                <li><a th:href="@{/user/logout}">로그아웃[[${auth.getUserInfo().getId()}]]</a></li>
                            </th:block>
                        </th:block>
                        <li class="cate cate1" sec:authorize="hasAnyAuthority('ROLE_ADMIN')">
                            <a class="nav-link" th:href="@{/user/join}">회원리스트</a>
                        </li>
                        <li class="cate cate1">
                            <a class="nav-link" th:href="@{/user/myPage}">내정보</a>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="content-fluid">
        <th:block th:replace="${content}"></th:block>
    </div>

    <footer>
        <div class="flogo">로고</div>
        <div>
            <ul>
                <li class="fli"><a href="#">공지사항</a></li>
                <li class="fli"><a href="#">이용안내</a></li>
                <li class="fli"><a href="#">개인정보처리방침</a></li>
                <li class="fli"><a href="#">FAQ</a></li>
            </ul>
        </div>
    </footer>
    <script>
        const out = document.getElementById("out");
        out.addEventListener("click",()=>{
            location.href = "/user/logout";
        });
    </script>
    </body>
</th:block>
</html>