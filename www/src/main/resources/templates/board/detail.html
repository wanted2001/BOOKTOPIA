<!DOCTYPE html>
<title>안녕하세요</title>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<link rel="stylesheet" th:href="@{/dist/css/communityDetail.css}">
<!--마크다운 라이브러리-->
<script src="https://cdn.jsdelivr.net/npm/showdown/dist/showdown.min.js"></script>
<script th:src="@{/dist/js/markdown.js}"></script>
<link rel="stylesheet" th:href="@{/dist/css/communityDetailMarkdown.css}">
<th:block th:replace="~{layout :: setFragment(~{this::content})}">
    <th:block th:fragment="content">
        <th:block th:with="auth=${#authentication.getPrincipal().userVO}"}>
        <div class="wrap">
            <div class="commDeArea">
            <input type="hidden" th:value="${auth.getId()}" class="commDeUserId">
            <!--작성자, 등록일 하나로-->
            <div class="commDeCate" th:switch="${bvo.bCate}">
                <span th:case="novel" th:text="'소설'"></span>
                <span th:case="finance" th:text="'경제/경영'"></span>
                <span th:case="human" th:text="'인문'"></span>
                <span th:case="history" th:text="'역사/문화'"></span>
                <span th:case="poem" th:text="'시/에세이'"></span>
                <span th:case="development" th:text="'자기개발'"></span>
            </div>
            <div class="commDeTitle">
                <div class="commDetTitle">[[${bvo.bTitle}]]</div>
            </div>
            <div class="commDeWriterInfo">
                <span class="commDeWriter">작성자 : [[${bvo.bWriter}]]&nbsp·&nbsp 등록일 : &nbsp</span>
                <span class="commDeRegdate" th:text="${#strings.substring(bvo.bRegDate,0,16)}"></span>
            </div>

            <div class="commDeImgArea" th:if="${bvo.bMainImg!=''}">
                <img th:src="@{|/upload/${bvo.bMainImg}|}">
                <div class="commDeContent">
                    [[${bvo.bContent}]]
                </div>
            </div>
            <div class="commDeNoImgContent" th:unless="${bvo.bMainImg!=''}">
                <div class="commNoDeContent">
                    [[${bvo.bContent}]]
                </div>
            </div>
            </div>
            <!--수정/삭제 버튼-->
            <th:block th:with="auth=${#authentication.getName()}">
                <div th:if="${auth eq bvo.bWriter}" class="commBtnArea">
                    <a th:href="@{/board/modify(bno=${bvo.getBno()})}"><button type="button" class="commModBtn">수정</button></a>
                    <a th:href="@{/board/delete(bno=${bvo.getBno()})}"><button type="button" class="commDelBtn">삭제</button></a>
                </div>
            </th:block>
            <div class="comm-commArea">
                <!--댓글출력란-->
                <div class="commDeComment">
                    <div class="commDeCommentCtn">댓글 [[${bvo.bCmtCnt}]]</div>
                    <div class="commDeOneComment">
                        <div class="commDe-ComInfo">
                            <div class="commDe-Writer"></div>
                            <div class="commDe-RegDate"></div>
                        </div>
                        <div class="commDe-Content"></div>
                        <!--대댓글-->
                        <div class="commDe-ReComment"></div>
                    </div>
                </div>
                <!--댓글입력란-->
                <div class="comm-CommInputArea">
                    <input id="cmtWriter" th:value="${auth.getId()}" type="hidden">
                    <div class="comm-CommInput">
                        <input type="text" id="cmtContent" name="comm-Comment" class="comm-Comment" placeholder="댓글을 입력해주세요">
                        <button type="button" id="cmtAddBtn" class="comm-CommRegBtn">등록</button>
                    </div>
                </div>
            </div>
        </div>
        <script th:inline="javascript">
            const cmtWriter = '[[${bvo.bWriter}]]';
            const bnoVal = '[[${bvo.bno}]]';
        </script>
        <script th:src="@{/dist/js/boardComment.js}"></script>
        <script>spreadCommentList(bnoVal);</script>
        </th:block>
    </th:block>
</th:block>
